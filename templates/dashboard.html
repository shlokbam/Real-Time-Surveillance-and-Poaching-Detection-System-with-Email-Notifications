<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detection Dashboard - WildGuard AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
    <!-- Top Navigation -->
    <nav class="topnav">
        <div class="nav-left">
            <a href="/" class="logo">
                <span class="logo-icon">ğŸ›¡ï¸</span>
                <span class="logo-text">WildGuard AI</span>
            </a>
        </div>
        <div class="nav-center">
            <span class="status-badge" id="statusBadge">
                <span class="status-dot"></span>
                <span id="statusText">Standby</span>
            </span>
        </div>
        <div class="nav-right">
            <a href="/" class="btn-back">â† Back to Home</a>
        </div>
    </nav>

    <div class="dashboard-container">
        <!-- Main Grid -->
        <div class="dashboard-grid">
            <!-- Control Panel -->
            <div class="card control-card">
                <div class="card-header">
                    <h2>ğŸ® Control Panel</h2>
                </div>
                
                <div class="control-section">
                    <h3>ğŸ“¹ Video Upload</h3>
                    <div class="upload-area" id="uploadArea">
                        <input type="file" id="videoInput" accept="video/*" hidden>
                        <div class="upload-icon">ğŸ“</div>
                        <p id="uploadText">Click or drag video here</p>
                        <span class="upload-info">MP4, AVI, MOV, WEBM, MKV</span>
                    </div>
                    <button class="btn btn-primary" id="uploadBtn" disabled>
                        <span>ğŸš€</span> Start Detection
                    </button>
                </div>

                <div class="divider">OR</div>

                <div class="control-section">
                    <h3>ğŸ“· Live Camera</h3>
                    <button class="btn btn-success" id="startCameraBtn">
                        <span>ğŸ“¹</span> Start Live Camera
                    </button>
                </div>

                <div class="control-section">
                    <button class="btn btn-danger" id="stopBtn" disabled>
                        <span>â¹ï¸</span> Stop Detection
                    </button>
                </div>
            </div>

            <!-- Live Feed -->
            <div class="card feed-card">
                <div class="card-header">
                    <h2>ğŸ“º Live Detection Feed</h2>
                    <div class="fps-badge" id="fpsBadge">0 FPS</div>
                </div>
                
                <div class="video-container" id="videoContainer">
                    <div class="placeholder" id="placeholder">
                        <div class="placeholder-icon">ğŸ¥</div>
                        <p>No active detection</p>
                        <span>Upload video or start camera</span>
                    </div>
                    <img id="videoFeed" src="" alt="Video Feed" style="display: none;">
                </div>
            </div>

            <!-- Statistics -->
            <div class="card stats-card">
                <div class="card-header">
                    <h2>ğŸ“Š Statistics</h2>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-icon">ğŸ¯</div>
                        <div class="stat-info">
                            <div class="stat-value" id="totalDetections">0</div>
                            <div class="stat-label">Detections</div>
                        </div>
                    </div>
                    
                    <div class="stat-box">
                        <div class="stat-icon">ğŸ“§</div>
                        <div class="stat-info">
                            <div class="stat-value" id="emailsSent">0</div>
                            <div class="stat-label">Alerts Sent</div>
                        </div>
                    </div>
                    
                    <div class="stat-box">
                        <div class="stat-icon">ğŸ•</div>
                        <div class="stat-info">
                            <div class="stat-value small" id="lastDetection">Never</div>
                            <div class="stat-label">Last Detection</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions & Notifications -->
            <div class="card actions-card">
                <div class="card-header">
                    <h2>âš¡ Quick Actions</h2>
                </div>
                
                <div class="actions-grid">
                    <button class="action-btn" id="downloadBtn">
                        <span class="action-icon">ğŸ“¥</span>
                        <span>Download Report</span>
                    </button>
                    
                    <button class="action-btn" id="galleryBtn">
                        <span class="action-icon">ğŸ–¼ï¸</span>
                        <span>View Gallery</span>
                    </button>
                </div>

                <div class="notifications-section">
                    <h3>ğŸ”” Recent Alerts</h3>
                    <div class="notification-list" id="notificationArea">
                        <div class="no-notifications">No alerts yet</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gallery Modal -->
        <div class="modal" id="galleryModal">
            <div class="modal-content gallery-modal-content">
                <div class="modal-header">
                    <h2>ğŸ–¼ï¸ Detected Images Gallery</h2>
                    <button class="modal-close" id="closeGalleryBtn">âœ•</button>
                </div>
                
                <div class="gallery-grid" id="galleryGrid">
                    <div class="gallery-placeholder">
                        <p>No images detected yet</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Image View Modal -->
        <div class="modal" id="imageModal">
            <div class="modal-content image-modal-content">
                <button class="modal-close" id="modalClose">âœ•</button>
                <img class="modal-image" id="modalImage" src="" alt="Detection">
                <div class="modal-footer">
                    <div class="modal-info">
                        <p id="modalTimestamp"></p>
                    </div>
                    <button class="btn btn-danger btn-sm" id="deleteImageBtn">
                        <span>ğŸ—‘ï¸</span> Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
</body>
</html>